require(["../../js/config/config"],function(){require(["jquery","cookie","template","ChineseDistricts","distpicker"],function(a,b,c){a("#emptys").load("../template/common.html",function(){a("#gomeTops").html(c("gome-top"))}),a("#distpicker3").distpicker({province:"\u56DB\u5DDD\u7701",city:"\u7EF5\u9633\u5E02",district:"\u76D0\u4EAD"}),a.ajax({type:"get",url:"https://bigd.gome.com.cn/gome/rec?callback=ca&boxid=box38&pid=A0006185017&area=11010200&cid=125433263237146111&uid=76957826679&imagesize=80&brid=97911769&shopid=80001110&c1id=cat18596269&c3id=cat15985843&sid=pop8009802422&_=1537235560564",dataType:"jsonp",success:function(){ca()}}),window.ca=function(b){var b=b.lst;a("#shopProduct").load("../template/shopCar.html",function(){var e=localStorage.getItem("goods");if(!e||2==e.length)a("#mask").css({display:"block"});else{for(var d=[],f=[],g=JSON.parse(e),h=[],j=[],k=0;k<g.length;k++)b.forEach(function(a){g[k].pid==a.pid&&(f.push(a),j.push(g[k].count))});f.forEach(function(a,b){h.push(+a.price*+j[b])}),d.push(c("shopCar",{list:f,count:j,price:h})),a("#shopProduct").html(d),a("body").on("click","#add",function(){var b=a(this).parents(".msg").find("#dmoney"),c=a(this).parents(".msg").find("#xiaoji"),d=a(this).parents(".msg").find("#inp"),e=a(this).parents(".shop-product").find("#check3"),f=+d.val();f+=1,d.val(f);let h=d.val();var j=h*b.html();c.html(j);var k=a(this).parents("#addRed").attr("pid");g.forEach(function(a){a.pid===k&&a.count++}),localStorage.setItem("goods",JSON.stringify(g));for(var l=Array.from(a(".xiaoji")),m=Array.from(a(".classinp")),n=0,o=0,p=[],q=0;q<check3.length;q++)!0==check3[q].checked&&p.push(q);for(var q=0;q<p.length;q++)o+=+m[p[q]].value,n+=+l[p[q]].innerText;a("#check1").prop("checked")||a("#check2").prop("checked")||a("#check4").prop("checked")?(a("#countNum").html(o),a("#countMoney").html(n)):0==p.length?(a("#countMoney").html("0"),a("#countNum").html("0")):(a("#countNum").html(o),a("#countMoney").html(n))}),a("body").on("click","#red",function(){var b=a(this).parents(".msg").find("#dmoney"),c=a(this).parents(".msg").find("#xiaoji"),d=a(this).parents(".msg").find("#inp"),e=a(this).parents(".shop-product").find("#check3"),f=+d.val();f-=1,d.val(f),1>=f&&d.val(1);let h=d.val();var j=h*b.html();c.html(j);for(var k=Array.from(a(".check3")),l=Array.from(a(".xiaoji")),m=Array.from(a(".classinp")),n=0,o=0,p=[],q=0;q<k.length;q++)!0==k[q].checked&&p.push(q);for(var q=0;q<p.length;q++)o+=+m[p[q]].value,n+=+l[p[q]].innerText;a("#check1").prop("checked")||a("#check2").prop("checked")||a("#check4").prop("checked")?(a("#countNum").html(o),1>=f&&a("#countNum").html(o),a("#countMoney").html(n)):0==p.length?(a("#countMoney").html("0"),a("#countNum").html("0")):(a("#countNum").html(o),a("#countMoney").html(n));var r=a(this).parents("#addRed").attr("pid");g.forEach(function(a){a.pid===r&&(1>=a.count||a.count--)}),localStorage.setItem("goods",JSON.stringify(g))}),a("body").on("click","#dele",function(){var b,c=a(this).attr("piddele");console.log(c);for(var d=0;d<g.length;d++)c==g[d].pid&&(b=d);var e=[];g.forEach(function(a,c){c!=b&&e.push(a)}),console.log(e),localStorage.setItem("goods",JSON.stringify(e)),a(this).parents(".shop-product").css({display:"none"}),0==e.length&&a("#mask").css({display:"block"})}),a("body").on("click","input",function(){var b=Array.from(a(".xiaoji")),c=Array.from(a(".classinp")),d=[],e=[];b.forEach(function(a){d.push(a.innerText)}),c.forEach(function(a){e.push(a.value)});var f=0,g=0;if(d.forEach(function(a){f+=+a}),e.forEach(function(a){g+=+a}),("check1"==a(this).attr("id")||"check2"==a(this).attr("id")||"check4"==a(this).attr("id"))&&(a(this).prop("checked")?(a("input[type='checkbox']").prop("checked",!0),a("#countNum").html(g),a("#countMoney").html(f)):(a("input[type='checkbox']").prop("checked",!1),a("#countNum").html("0"),a("#countMoney").html("0"))),"check3"==a(this).attr("id")){for(var h=Array.from(a(".check3")),j=Array.from(a(".xiaoji")),k=Array.from(a(".classinp")),l=0,m=0,n=[],o=0;o<h.length;o++)!0==h[o].checked&&n.push(o);for(var o=0;o<n.length;o++)m+=+k[n[o]].value,l+=+j[n[o]].innerText;n.length==h.length?(a("input[type='checkbox']").prop("checked",!0),a("#countMoney").html(l),a("#countNum").html(m)):0==n.length?(a("#check1").prop("checked",!1),a("#check2").prop("checked",!1),a("#check4").prop("checked",!1),a("#countMoney").html("0"),a("#countNum").html("0")):(a("#check1").prop("checked",!1),a("#check2").prop("checked",!1),a("#check4").prop("checked",!1),a("#countMoney").html(l),a("#countNum").html(m))}})}})}})});