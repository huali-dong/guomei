(function(a){"function"==typeof define&&define.amd?define(["jquery","ChineseDistricts"],a):"object"==typeof exports?a(require("jquery"),require("ChineseDistricts")):a(jQuery,ChineseDistricts)})(function(a,b){"use strict";function c(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,a.isPlainObject(d)&&d),this.placeholders=a.extend({},c.DEFAULTS),this.active=!1,this.init()}if("undefined"==typeof b)throw new Error("The file \"distpicker.data.js\" must be included first!");var d="change.distpicker",e="province",f="city",g="district";c.prototype={constructor:c,init:function(){var b=this.options,c=this.$element.find("select"),d=c.length,h={};c.each(function(){a.extend(h,a(this).data())}),a.each([e,f,g],a.proxy(function(a,e){h[e]?(b[e]=h[e],this["$"+e]=c.filter("[data-"+e+"]")):this["$"+e]=d>a?c.eq(a):null},this)),this.bind(),this.reset(),this.active=!0},bind:function(){this.$province&&this.$province.on(d,this._changeProvince=a.proxy(function(){this.output(f),this.output(g)},this)),this.$city&&this.$city.on(d,this._changeCity=a.proxy(function(){this.output(g)},this))},unbind:function(){this.$province&&this.$province.off(d,this._changeProvince),this.$city&&this.$city.off(d,this._changeCity)},output:function(c){var d,h,i,j=this.options,k=this.placeholders,l=this["$"+c],m={},n=[];l&&l.length&&(i=j[c],d=c===e?86:c===f?this.$province&&this.$province.find(":selected").data("code"):c===g?this.$city&&this.$city.find(":selected").data("code"):d,m=a.isNumeric(d)?b[d]:null,a.isPlainObject(m)&&a.each(m,function(a,b){var c=b===i;c&&(h=!0),n.push({code:a,address:b,selected:c})}),!h&&(n.length&&(j.autoSelect||j.autoselect)&&(n[0].selected=!0),!this.active&&i&&(k[c]=i)),j.placeholder&&n.unshift({code:"",address:k[c],selected:!1}),l.html(this.getList(n)))},getList:function(b){var c=[];return a.each(b,function(a,b){c.push("<option value=\""+(b.address&&b.code?b.address:"")+"\" data-code=\""+(b.code||"")+"\""+(b.selected?" selected":"")+">"+(b.address||"")+"</option>")}),c.join("")},reset:function(a){a?this.$province&&this.$province.find(":first").prop("selected",!0).trigger(d):(this.output(e),this.output(f),this.output(g))},destroy:function(){this.unbind(),this.$element.removeData("distpicker")}},c.DEFAULTS={autoSelect:!0,placeholder:!0,province:"\u2014\u2014 \u7701 \u2014\u2014",city:"\u2014\u2014 \u5E02 \u2014\u2014",district:"\u2014\u2014 \u533A \u2014\u2014"},c.setDefaults=function(b){a.extend(c.DEFAULTS,b)},c.other=a.fn.distpicker,a.fn.distpicker=function(b){var d=[].slice.call(arguments,1);return this.each(function(){var e,f,g=a(this),h=g.data("distpicker");if(!h){if(/destroy/.test(b))return;e=a.extend({},g.data(),a.isPlainObject(b)&&b),g.data("distpicker",h=new c(this,e))}"string"==typeof b&&a.isFunction(f=h[b])&&f.apply(h,d)})},a.fn.distpicker.Constructor=c,a.fn.distpicker.setDefaults=c.setDefaults,a.fn.distpicker.noConflict=function(){return a.fn.distpicker=c.other,this},a(function(){a("[data-toggle=\"distpicker\"]").distpicker()})});